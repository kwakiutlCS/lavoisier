$(function() {

    var canvas = $("#myCanvas");
    var ctx = canvas.get(0).getContext("2d");
    var bg = "rgb(255,250,230)";
    var dx = 0;
    var dy = 0;
    var w;
    var h;

    function fillBackground() {
	w = canvas.width();
	h = canvas.height();
	
	if (w/16.*9 < h) {
	    dy = (h - w/16.*9)/2;
	    dx = 0;
	    h = w/16.*9;
	}
	else {
	    dx = (w - h/9.*16)/2;
	    dy = 0;
	    w = h/9.*16;
	}
	ctx.fillRect(dx, dy, w, h);
	
    };


    function resizeCanvas() {
	ctx.save();
	canvas.attr("width", $(window).get(0).innerWidth);
	canvas.attr("height", $(window).get(0).innerHeight);
	ctx.fillStyle = bg;
	fillBackground();
	x.draw();
	ctx.restore();
    };

    $(window).resize(resizeCanvas);

    
    

    // atom
    function Atom(x,y) {
	this.radius = 50;
	this.x = x;
	this.y = y;
	this.src ="lib/red.png";

	this.img = new Image();
	this.img.src = this.src;
	
    };

    Atom.prototype.draw = function() {
	ctx.drawImage(this.img, dx+w*this.x-w/1366*this.radius/2,dy+h*this.y-h/768*this.radius/2,w/1366*this.radius,h/768*this.radius);
	
    };

    var x = new Atom(0.2,0.3);

    $(x.img).on("load", function() {

	resizeCanvas();

    });

    
});